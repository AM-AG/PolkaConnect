Upgrade the dashboard to support simultaneous wallet connections for:

ü¶ä MetaMask (Ethereum)

‚óè Polkadot.js (Substrate)

This will let users view balances, governance data, and interact with both ecosystems directly in one UI.

‚öôÔ∏è PHASE 1 ‚Äî Install Dependencies

Objective: Ensure both EVM and Substrate libraries are available.

Tasks:

Run in project root:

npm install @polkadot/api @polkadot/extension-dapp ethers


Verify that React Query or Zustand is already configured for global state management.

Ensure that /components/DashboardStats.tsx already exists to display dynamic wallet data.

üîå PHASE 2 ‚Äî Create Multi-Wallet Hook

Objective: Add a reusable hook that connects to both MetaMask and Polkadot.js wallets.

Tasks for Agents:

Create a new file:

src/hooks/useMultiChainWallet.ts


Add the following logic:

import { useState } from 'react';
import { web3Enable, web3Accounts } from '@polkadot/extension-dapp';
import { ethers } from 'ethers';
import { ApiPromise, WsProvider } from '@polkadot/api';

export function useMultiChainWallet() {
  const [ethWallet, setEthWallet] = useState<any>(null);
  const [dotWallet, setDotWallet] = useState<any>(null);

  const connectEthereum = async () => {
    if (!window.ethereum) throw new Error("MetaMask not installed");
    const provider = new ethers.BrowserProvider(window.ethereum);
    const accounts = await provider.send('eth_requestAccounts', []);
    setEthWallet({ address: accounts[0], provider });
    return accounts[0];
  };

  const connectPolkadot = async () => {
    const extensions = await web3Enable('PolkaConnect');
    if (extensions.length === 0) throw new Error('Polkadot.js not installed');
    const accounts = await web3Accounts();
    const provider = new WsProvider('wss://rpc.polkadot.io');
    const api = await ApiPromise.create({ provider });
    setDotWallet({ address: accounts[0].address, accounts, api });
    return accounts[0].address;
  };

  return { ethWallet, dotWallet, connectEthereum, connectPolkadot };
}


Make sure this hook exports wallet states and connect functions.

üß± PHASE 3 ‚Äî Integrate Wallet Buttons in the Dashboard

Objective: Add ‚ÄúConnect MetaMask‚Äù and ‚ÄúConnect Polkadot‚Äù buttons to the dashboard header.

Tasks:

Open the dashboard component:

src/components/DashboardStats.tsx


Import the wallet hook:

import { useMultiChainWallet } from '@/hooks/useMultiChainWallet';
import { Button } from '@/components/ui/button';


Inside the component:

const { ethWallet, dotWallet, connectEthereum, connectPolkadot } = useMultiChainWallet();


Add connect buttons at the top:

<div className="flex gap-4 mb-4">
  <Button onClick={connectEthereum}>
    {ethWallet ? `ü¶ä ${ethWallet.address.slice(0,6)}...` : "Connect MetaMask"}
  </Button>
  <Button onClick={connectPolkadot}>
    {dotWallet ? `‚óè ${dotWallet.address.slice(0,6)}...` : "Connect Polkadot"}
  </Button>
</div>

üí∞ PHASE 4 ‚Äî Display Balances Dynamically

Objective: Fetch balances from both networks and show them live in dashboard cards.

Tasks:

Add helper functions in src/hooks/useBalances.ts:

import { ethers } from 'ethers';
import { ApiPromise } from '@polkadot/api';

export async function getEthereumBalance(provider: ethers.BrowserProvider, address: string) {
  const balance = await provider.getBalance(address);
  return parseFloat(ethers.formatEther(balance)).toFixed(4);
}

export async function getPolkadotBalance(api: ApiPromise, address: string) {
  const account = await api.query.system.account(address);
  const balance = account.data.free.toHuman();
  return balance;
}


Update DashboardStats.tsx:

const [ethBalance, setEthBalance] = useState<string | null>(null);
const [dotBalance, setDotBalance] = useState<string | null>(null);

useEffect(() => {
  if (ethWallet?.provider && ethWallet?.address) {
    getEthereumBalance(ethWallet.provider, ethWallet.address).then(setEthBalance);
  }
  if (dotWallet?.api && dotWallet?.address) {
    getPolkadotBalance(dotWallet.api, dotWallet.address).then(setDotBalance);
  }
}, [ethWallet, dotWallet]);


Replace static cards with dynamic data:

<StatCard title="ETH Balance" value={ethBalance ? `${ethBalance} ETH` : "‚Äî"} />
<StatCard title="DOT Balance" value={dotBalance ? `${dotBalance} DOT` : "‚Äî"} />

üîÑ PHASE 5 ‚Äî Add Auto-Refresh

Objective: Keep balances up to date automatically.

Tasks:

Add an interval inside the same effect:

useEffect(() => {
  const interval = setInterval(() => {
    if (ethWallet?.provider && ethWallet?.address)
      getEthereumBalance(ethWallet.provider, ethWallet.address).then(setEthBalance);
    if (dotWallet?.api && dotWallet?.address)
      getPolkadotBalance(dotWallet.api, dotWallet.address).then(setDotBalance);
  }, 30000); // every 30s

  return () => clearInterval(interval);
}, [ethWallet, dotWallet]);

üß≠ PHASE 6 ‚Äî Improve UI & State Persistence

Objective: Improve UX and remember connected wallets.

Tasks:

Save connected addresses to localStorage:

useEffect(() => {
  if (ethWallet?.address) localStorage.setItem('ethWallet', ethWallet.address);
  if (dotWallet?.address) localStorage.setItem('dotWallet', dotWallet.address);
}, [ethWallet, dotWallet]);


Load them on page refresh and auto-reconnect if possible.

Add chain logos and colors for better visual distinction.

üåâ PHASE 7 ‚Äî Optional Cross-Chain Data Display

Objective: Show both chain statuses and network metadata.

Tasks:

Fetch chain names dynamically:

const ethNetwork = await ethWallet.provider.getNetwork();
const dotChain = await dotWallet.api.rpc.system.chain();


Display in dashboard:

<StatCard title="Ethereum Network" value={ethNetwork.name} />
<StatCard title="Polkadot Chain" value={dotChain.toString()} />
